<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬æ—…éŠè¦åŠƒ - Travel Planner Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-red: #BC002D;
            --accent-pink: #FFB7C5;
            --accent-green: #00A86B;
            --dark-gray: #2D3436;
            --light-bg: #F8F9FA;
            --white: #FFFFFF;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.12);
            --font-size-base: 14px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background-color: var(--light-bg);
            color: var(--dark-gray);
            font-size: var(--font-size-base);
        }

        body.dark {
            --light-bg: #1A1A1A;
            --white: #2A2A2A;
            --dark-gray: #E0E0E0;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
        }

        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            border-top: 1px solid #E8E8E8;
            padding: 8px;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .bottom-nav.active {
            display: flex;
            justify-content: space-around;
        }

        .nav-item {
            padding: 8px;
            cursor: pointer;
            text-align: center;
            font-size: 12px;
            color: var(--dark-gray);
        }

        .nav-item.active {
            color: var(--primary-red);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 14px;
            color: #999;
        }

        /* DASHBOARD */
        .trips-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
        }

        .trip-card {
            background: var(--white);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
            cursor: pointer;
        }

        .trip-cover {
            height: 160px;
            object-fit: cover;
            width: 100%;
        }

        .trip-info {
            padding: 16px;
        }

        .trip-name {
            font-weight: 700;
            font-size: 18px;
        }

        /* TRIP DETAIL */
        .trip-cover-header {
            height: 200px;
            object-fit: cover;
            width: 100%;
            border-radius: 16px 16px 0 0;
        }

        .trip-detail-header {
            background: linear-gradient(135deg, var(--primary-red), #8B001F);
            color: var(--white);
            border-radius: 0 0 16px 16px;
            padding: 16px;
            margin-bottom: 32px;
        }

        .trip-detail-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .trip-countdown-large {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .day-selector-horizontal {
            background: var(--white);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            display: flex;
            gap: 12px;
            overflow-x: auto;
            scroll-behavior: smooth;
        }

        .day-btn {
            flex-shrink: 0;
            padding: 16px;
            background: var(--light-bg);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
            min-width: 100px;
        }

        .day-btn:hover {
            border-color: var(--primary-red);
        }

        .day-btn.active {
            background: var(--primary-red);
            color: var(--white);
            font-weight: 700;
        }

        .add-day-btn {
            background: var(--accent-pink);
            color: var(--dark-gray);
            padding: 16px;
            border-radius: 12px;
            cursor: pointer;
        }

        .weather-card {
            background: var(--white);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: var(--shadow);
        }

        .timeline {
            background: var(--white);
            border-radius: 16px;
            padding: 32px;
            box-shadow: var(--shadow);
        }

        .day-summary {
            font-weight: 600;
            margin-bottom: 16px;
        }

        .activity-item {
            position: relative;
            margin-bottom: 24px;
            background: var(--light-bg);
            padding: 16px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .activity-edit {
            margin-left: auto;
            cursor: pointer;
        }

        .activity-map {
            color: var(--primary-red);
            text-decoration: underline;
        }

        /* RESERVATIONS */
        .reservations-section {
            margin-bottom: 32px;
        }

        .reservations-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .reservation-card {
            background: var(--white);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .reservation-edit {
            margin-left: auto;
            cursor: pointer;
        }

        /* BUDGET */
        .exchange-calculator {
            background: var(--white);
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 32px;
            box-shadow: var(--shadow);
        }

        .budget-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .expenditure-filter {
            margin-bottom: 24px;
        }

        /* SHOPPING */
        .shopping-stats {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }

        .shopping-stat {
            flex: 1;
            background: var(--white);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .shopping-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--white);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
        }

        .shopping-edit {
            margin-left: auto;
            cursor: pointer;
        }

        /* TODO LIST (CHECKLIST) */
        .todo-container {
            display: grid;
            gap: 24px;
        }

        .todo-section {
            background: var(--white);
            padding: 24px;
            border-radius: 16px;
            box-shadow: var(--shadow);
        }

        .todo-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .todo-edit {
            margin-left: auto;
            cursor: pointer;
        }

        /* SETTINGS */
        .settings-container {
            display: grid;
            gap: 24px;
        }

        .settings-card {
            background: var(--white);
            padding: 24px;
            border-radius: 16px;
            box-shadow: var(--shadow);
        }

        /* EFFECTS */
        .snowflake, .cherry-blossom {
            position: fixed;
            top: -10px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            pointer-events: none;
            animation: fall linear infinite;
        }

        .cherry-blossom {
            background: pink;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: 20px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            box-shadow: var(--shadow-lg);
            margin: auto;
        }

        .preview-img {
            max-width: 100%;
            margin-top: 8px;
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 16px;
            }

            .page-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- DASHBOARD PAGE (ä¸»ç•«é¢) -->
            <div id="dashboard" class="page active">
                <div class="page-header">
                    <h1 class="page-title">æˆ‘çš„æ—…éŠè¨ˆåŠƒ</h1>
                    <p class="page-subtitle">ç®¡ç†ä½ çš„æ‰€æœ‰æ—…è¡Œ</p>
                </div>

                <button class="btn btn-primary" onclick="openModal('addTripModal')" style="margin-bottom: 24px;">+ æ·»åŠ æ–°æ—…éŠè¨ˆåŠƒ</button>

                <div id="tripsList" class="trips-container">
                    <!-- ç¤ºä¾‹ Trip -->
                    <div class="trip-card" onclick="enterTrip('trip1')">
                        <img src="https://example.com/default-cover.jpg" alt="å°é¢" class="trip-cover">
                        <div class="trip-info">
                            <div class="trip-name">2026 æ—¥æœ¬ä¹‹æ—…</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TRIP DETAIL PAGE -->
            <div id="tripDetail" class="page">
                <img id="tripCover" src="" alt="æ—…éŠå°é¢" class="trip-cover-header">

                <div class="trip-detail-header">
                    <h1 class="trip-detail-title" id="tripTitle">2026 æ—¥æœ¬ä¹‹æ—…</h1>
                    <div class="trip-countdown-large" id="countdownTimer">6å¤© 10å°æ™‚ 06åˆ†é˜</div>
                </div>

                <div class="day-selector-horizontal" id="daySelector">
                    <div class="day-btn active">
                        <div>Wed</div>
                        <div style="font-size: 20px;">14</div>
                        <div class="day-btn-weather">â˜€ï¸</div>
                        <div style="font-size: 11px;">12Â°C</div>
                    </div>
                    <!-- æ›´å¤šæ—¥ -->
                    <div class="add-day-btn" onclick="openModal('addDayModal')">+ æ–°å¢æ—¥æœŸ</div>
                </div>

                <div class="weather-card">
                    <div class="weather-icon">â˜€ï¸</div>
                    <div class="weather-info">
                        <div class="weather-condition">æ™´å¤©</div>
                        <div class="weather-details">12Â°C ~ 20Â°C | éš±é›²æ™‚æ™´</div>
                    </div>
                </div>

                <div class="timeline">
                    <div class="day-summary">Day 1: æŠµé”å¤§é˜ªä¸¦æ¢ç´¢å¸‚å€</div>
                    <div id="activityList" class="activity-list">
                        <div class="activity-item">
                            <div class="activity-time">ğŸ• 12:45</div>
                            <div class="activity-location">ğŸ“ å¤§é˜ª é—œè¥¿æ©Ÿå ´ <a href="https://maps.google.com/?q=å¤§é˜ª é—œè¥¿æ©Ÿå ´" class="activity-map">åœ°åœ–</a></div>
                            <span class="activity-edit">â‹¯</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="openModal('addActivityModal')" style="width: 100%; margin-top: 16px;">+ æ–°å¢è¡Œç¨‹</button>
                </div>
            </div>

            <!-- RESERVATIONS PAGE -->
            <div id="reservations" class="page">
                <div class="page-header">
                    <h1 class="page-title">é ç´„ç®¡ç†</h1>
                    <p class="page-subtitle">æ©Ÿç¥¨ã€ä½å®¿ã€äº¤é€šã€å…¶ä»–</p>
                    <button class="btn btn-primary" onclick="openModal('addReservationModal')" style="float: right;">+ æ–°å¢é ç´„</button>
                </div>

                <div class="reservations-section">
                    <h2>æ©Ÿç¥¨ (å»ç¨‹ & å›ç¨‹)</h2>
                    <div class="reservations-container" id="flightsList">
                        <!-- ç¤ºä¾‹ -->
                        <div class="reservation-card">
                            <div class="reservation-header">æ©Ÿç¥¨</div>
                            <div class="reservation-body">
                                <div class="reservation-field">èˆªç­è™Ÿ: CX123</div>
                                <img src="" alt="æ†‘è­‰" class="preview-img">
                            </div>
                            <span class="reservation-edit">â‹¯</span>
                        </div>
                    </div>
                </div>

                <div class="reservations-section">
                    <h2>ä½å®¿</h2>
                    <div class="reservations-container" id="accommodationsList"></div>
                </div>

                <div class="reservations-section">
                    <h2>äº¤é€š</h2>
                    <div class="reservations-container" id="transportsList"></div>
                </div>

                <div class="reservations-section">
                    <h2>å…¶ä»–</h2>
                    <div class="reservations-container" id="othersList"></div>
                </div>
            </div>

            <!-- BUDGET PAGE -->
            <div id="budget" class="page">
                <div class="page-header">
                    <h1 class="page-title">æ—…è¡Œé ç®—</h1>
                    <p class="page-subtitle">è¿½è¹¤èŠ±è²»</p>
                </div>

                <div class="exchange-calculator">
                    <h3>åŒ¯ç‡è¨ˆç®—æ©Ÿ (JPY to HKD)</h3>
                    <input type="number" placeholder="JPY" oninput="convertCurrency(this.value, true)">
                    <span>â‡„</span>
                    <input type="number" placeholder="HKD" readonly id="hkdOutput">
                    <p>åŒ¯ç‡: 1 JPY = 0.0509 HKD</p>
                </div>

                <div class="budget-summary">
                    <div class="budget-card">
                        <div class="budget-card-label">ç¸½é ç®— (HKD)</div>
                        <div class="budget-amount">$50,000</div>
                    </div>
                    <div class="budget-card">
                        <div class="budget-card-label">å·²èŠ±è²» (HKD)</div>
                        <div class="budget-amount" style="color: var(--primary-red);">$0</div>
                    </div>
                    <div class="budget-card">
                        <div class="budget-card-label">å‰©é¤˜ (HKD)</div>
                        <div class="budget-amount" style="color: var(--accent-green);">$50,000</div>
                    </div>
                </div>

                <div class="expenditure-filter">
                    <select>
                        <option>æ‰€æœ‰åˆ†é¡</option>
                        <option>æ©Ÿç¥¨</option>
                        <option>ä½å®¿</option>
                    </select>
                    <button class="btn btn-primary" onclick="openModal('addExpenditureModal')" style="float: right;">+ æ–°å¢æ”¯å‡º</button>
                </div>

                <div id="expendituresList">
                    <!-- ç¤ºä¾‹æ”¯å‡º -->
                </div>
            </div>

            <!-- SHOPPING PAGE -->
            <div id="shopping" class="page">
                <div class="page-header">
                    <h1 class="page-title">è³¼ç‰©æ¸…å–®</h1>
                    <button class="btn btn-primary" onclick="openModal('addShoppingModal')" style="float: right;">+ æ–°å¢</button>
                </div>

                <div class="shopping-stats">
                    <div class="shopping-stat">
                        <div class="shopping-stat-num" id="pendingCount">8</div>
                        <div class="shopping-stat-label">å¾…è³¼è²·</div>
                    </div>
                    <div class="shopping-stat">
                        <div class="shopping-stat-num" id="purchasedCount">0</div>
                        <div class="shopping-stat-label">å·²è³¼è²·</div>
                    </div>
                </div>

                <div id="shoppingList">
                    <div class="shopping-item">
                        <input type="checkbox" onchange="togglePurchased(this)">
                        <div class="item-name">ä¿æš–è¤²</div>
                        <span class="shopping-edit">â‹¯</span>
                    </div>
                </div>
            </div>

            <!-- TOOLBOX (TODO LIST) PAGE -->
            <div id="toolbox" class="page">
                <div class="page-header">
                    <h1 class="page-title">å¾…è¾¦æ¸…å–®</h1>
                    <button class="btn btn-primary" onclick="openModal('addTodoModal')" style="float: right;">+ æ–°å¢</button>
                </div>

                <div class="todo-container">
                    <div class="todo-section">
                        <h3>è¡Œå‰æº–å‚™</h3>
                        <div class="todo-item">
                            <input type="checkbox">
                            <span>è­·ç…§</span>
                            <span class="todo-edit">â‹¯</span>
                        </div>
                    </div>
                    <!-- æ›´å¤šåˆ†é¡ -->
                </div>
            </div>

            <!-- SETTINGS PAGE -->
            <div id="settings" class="page">
                <div class="page-header">
                    <h1 class="page-title">è¨­ç½®</h1>
                </div>

                <div class="settings-container">
                    <div class="settings-card">
                        <h3>ä¸»é¡è‰²</h3>
                        <input type="color" onchange="changePrimaryColor(this.value)">
                    </div>

                    <div class="settings-card">
                        <h3>å­—é«”å¤§å°</h3>
                        <select onchange="changeFontSize(this.value)">
                            <option value="12px">å°</option>
                            <option value="14px">ä¸­</option>
                            <option value="16px">å¤§</option>
                        </select>
                    </div>

                    <div class="settings-card">
                        <h3>æ·±è‰²æ¨¡å¼</h3>
                        <button onclick="toggleDarkMode()">åˆ‡æ›</button>
                    </div>

                    <div class="settings-card">
                        <h3>ç‰¹æ•ˆ</h3>
                        <select onchange="changeEffect(this.value)">
                            <option value="none">ç„¡</option>
                            <option value="snow">è½é›ª</option>
                            <option value="cherry">æ«»èŠ±</option>
                        </select>
                    </div>
                </div>
            </div>
        </main>

        <!-- BOTTOM NAV -->
        <nav class="bottom-nav" id="bottomNav">
            <div class="nav-item" onclick="showPage('tripDetail')">ğŸ“… è¡Œç¨‹</div>
            <div class="nav-item" onclick="showPage('reservations')">ğŸ« é ç´„</div>
            <div class="nav-item" onclick="showPage('budget')">ğŸ’° é ç®—</div>
            <div class="nav-item" onclick="showPage('shopping')">ğŸ›ï¸ è³¼ç‰©</div>
            <div class="nav-item" onclick="showPage('toolbox')">ğŸ”§ å¾…è¾¦</div>
            <div class="nav-item" onclick="showPage('settings')">âš™ï¸ è¨­ç½®</div>
        </nav>
    </div>

    <!-- MODALS -->
    <div class="modal" id="addTripModal">
        <div class="modal-content">
            <div class="modal-header">æ–°å¢æ—…éŠè¨ˆåŠƒ</div>
            <form onsubmit="addTrip(event)">
                <div class="form-group">
                    <label class="form-label">è¨ˆåŠƒåç¨±</label>
                    <input type="text" class="form-input" id="tripName">
                </div>
                <div class="form-group">
                    <label class="form-label">å‡ºç™¼æ—¥æœŸ</label>
                    <input type="date" class="form-input" id="startDate">
                </div>
                <div class="form-group">
                    <label class="form-label">å°é¢åœ–ç‰‡</label>
                    <input type="file" accept="image/*" onchange="previewImage(this, 'tripCoverPreview')">
                    <img id="tripCoverPreview" class="preview-img">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">æ–°å¢</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addTripModal')">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="addDayModal">
        <div class="modal-content">
            <div class="modal-header">æ–°å¢æ—¥æœŸ</div>
            <form onsubmit="addDay(event)">
                <div class="form-group">
                    <label class="form-label">æ—¥æœŸ</label>
                    <input type="date" class="form-input">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">æ–°å¢</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addDayModal')">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="addActivityModal">
        <div class="modal-content">
            <div class="modal-header">æ–°å¢æ´»å‹•</div>
            <form onsubmit="addActivity(event)">
                <div class="form-group">
                    <label class="form-label">æ™‚é–“</label>
                    <input type="time" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">åœ°é»</label>
                    <input type="text" class="form-input">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">æ–°å¢</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addActivityModal')">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="addReservationModal">
        <div class="modal-content">
            <div class="modal-header">æ–°å¢é ç´„</div>
            <form onsubmit="addReservation(event)">
                <div class="form-group">
                    <label class="form-label">é¡å‹</label>
                    <select class="form-select" id="reservationType" onchange="showReservationFields(this.value)">
                        <option value="flight">æ©Ÿç¥¨</option>
                        <option value="accommodation">ä½å®¿</option>
                        <option value="transport">äº¤é€š</option>
                        <option value="other">å…¶ä»–</option>
                    </select>
                </div>
                <div id="reservationFields">
                    <!-- å‹•æ…‹å­—æ®µ -->
                </div>
                <div class="form-group">
                    <label class="form-label">æ†‘è­‰</label>
                    <input type="file" accept="image/*, .pdf">
                    <img class="preview-img">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">æ–°å¢</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addReservationModal')">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="addExpenditureModal">
        <div class="modal-content">
            <div class="modal-header">æ–°å¢æ”¯å‡º</div>
            <form onsubmit="addExpenditure(event)">
                <div class="form-group">
                    <label class="form-label">åˆ†é¡</label>
                    <select class="form-select">
                        <option>æ©Ÿç¥¨</option>
                        <option>ä½å®¿</option>
                        <option>äº¤é€š</option>
                        <option>é£Ÿç‰©</option>
                        <option>è³¼ç‰©</option>
                        <option>å…¶ä»–</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">åç¨±</label>
                    <input type="text" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">æ—¥æœŸ</label>
                    <input type="date" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">é‡‘é¡ (ç•¶åœ°è²¨å¹£)</label>
                    <input type="number" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">é‡‘é¡ (HKD)</label>
                    <input type="number" class="form-input" readonly>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">æ–°å¢</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addExpenditureModal')">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="addShoppingModal">
        <div class="modal-content">
            <div class="modal-header">æ–°å¢è³¼ç‰©é …ç›®</div>
            <form onsubmit="addShopping(event)">
                <div class="form-group">
                    <label class="form-label">åç¨±</label>
                    <input type="text" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">è³¼å…¥åœ°é»</label>
                    <input type="text" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">åœ–ç‰‡</label>
                    <input type="file" accept="image/*">
                    <img class="preview-img">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">æ–°å¢</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addShoppingModal')">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="addTodoModal">
        <div class="modal-content">
            <div class="modal-header">æ–°å¢å¾…è¾¦</div>
            <form onsubmit="addTodo(event)">
                <div class="form-group">
                    <label class="form-label">åˆ†é¡</label>
                    <select class="form-select">
                        <option>è¡Œå‰æº–å‚™</option>
                        <option>ç°½è­‰</option>
                        <option>æ—…éŠä¿éšª</option>
                        <option>å…¶ä»–</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">å‚™æ³¨</label>
                    <input type="text" class="form-input">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">æ–°å¢</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addTodoModal')">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentTrip = null;
        let trips = JSON.parse(localStorage.getItem('trips')) || [];
        const rate = 0.0509; // JPY to HKD

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        function enterTrip(tripId) {
            currentTrip = trips.find(t => t.id === tripId);
            document.getElementById('tripTitle').textContent = currentTrip.name;
            document.getElementById('tripCover').src = currentTrip.cover;
            document.getElementById('bottomNav').classList.add('active');
            showPage('tripDetail');
            // åŠ è¼‰å…¶ä»–æ•¸æ“š
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function previewImage(input, previewId) {
            const file = input.files[0];
            const reader = new FileReader();
            reader.onload = e => document.getElementById(previewId).src = e.target.result;
            reader.readAsDataURL(file);
        }

        function addTrip(e) {
            e.preventDefault();
            const name = document.getElementById('tripName').value;
            const start = document.getElementById('startDate').value;
            const cover = document.getElementById('tripCoverPreview').src;
            const newTrip = { id: Date.now().toString(), name, start, cover };
            trips.push(newTrip);
            localStorage.setItem('trips', JSON.stringify(trips));
            // æ›´æ–°åˆ—è¡¨
            closeModal('addTripModal');
        }

        function convertCurrency(value, fromJPY) {
            if (fromJPY) {
                document.getElementById('hkdOutput').value = (value * rate).toFixed(2);
            }
        }

        function showReservationFields(type) {
            const fields = document.getElementById('reservationFields');
            fields.innerHTML = '';
            if (type === 'flight') {
                fields.innerHTML = `
                    <div class="form-group"><label>æ—¥æœŸ</label><input type="date"></div>
                    <div class="form-group"><label>å‡ºç™¼æ™‚é–“</label><input type="time"></div>
                    <div class="form-group"><label>åˆ°é”æ™‚é–“</label><input type="time"></div>
                    <div class="form-group"><label>èˆªç­è™Ÿ</label><input type="text"></div>
                    <div class="form-group"><label>å‡ºç™¼åœ°</label><input type="text"></div>
                    <div class="form-group"><label>ç›®çš„åœ°</label><input type="text"></div>
                `;
            } else if (type === 'accommodation') {
                fields.innerHTML = `
                    <div class="form-group"><label>åç¨±</label><input type="text"></div>
                    <div class="form-group"><label>åœ°å€</label><input type="text"></div>
                    <div class="form-group"><label>å…¥ä½æ—¥æœŸ</label><input type="date"></div>
                    <div class="form-group"><label>é€€æˆ¿æ—¥æœŸ</label><input type="date"></div>
                    <div class="form-group"><label>é‡‘é¡</label><input type="number"></div>
                    <div class="form-group"><label>äººæ•¸</label><input type="number"></div>
                `;
            } // é¡ä¼¼å…¶ä»–
        }

        function togglePurchased(checkbox) {
            // ç§»å‹•åˆ°å·²è³¼
        }

        function changePrimaryColor(color) {
            document.documentElement.style.setProperty('--primary-red', color);
        }

        function changeFontSize(size) {
            document.documentElement.style.setProperty('--font-size-base', size);
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark');
        }

        function changeEffect(effect) {
            // ç§»é™¤ç¾æœ‰ç²’å­
            document.querySelectorAll('.snowflake, .cherry-blossom').forEach(el => el.remove());
            if (effect === 'none') return;
            const className = effect === 'snow' ? 'snowflake' : 'cherry-blossom';
            setInterval(() => {
                const flake = document.createElement('div');
                flake.className = className;
                flake.style.width = flake.style.height = Math.random() * 10 + 5 + 'px';
                flake.style.left = Math.random() * window.innerWidth + 'px';
                flake.style.animationDuration = Math.random() * 5 + 5 + 's';
                document.body.appendChild(flake);
                setTimeout(() => flake.remove(), 10000);
            }, 300);
        }

        function updateCountdown() {
            // å¦‚åŸ
        }

        updateCountdown();
        setInterval(updateCountdown, 60000);

        // åˆå§‹åŒ– trips åˆ—è¡¨
        // ...
    </script>
</body>
</html>