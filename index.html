<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ—…è¡Œè¨ˆåŠƒ App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    /* è‡ªè¨‚å¯æ„›é¡è‰² */
    .cute-bg { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%); }
    .cute-card { background: linear-gradient(145deg, #ffffff 0%, #f0f8ff 100%); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
    .cute-btn { background: linear-gradient(45deg, #ff6b6b, #ffd93d); }
  </style>
</head>
<body class="bg-gradient-to-br from-pink-50 to-blue-50 min-h-screen font-sans antialiased">

  <div id="app" class="h-screen flex flex-col max-w-md mx-auto bg-white shadow-2xl overflow-hidden">
    <!-- æ¨™é¡Œ -->
    <header class="bg-gradient-to-r from-purple-400 to-pink-400 p-6 text-center text-white shadow-lg">
      <h1 class="text-2xl font-bold">âœ¨ æˆ‘çš„æ—…è¡Œè¨ˆåŠƒ âœ¨</h1>
      <p class="text-sm opacity-90 mt-1">è¼•é¬†ç®¡ç†ä½ çš„è¡Œç¨‹ï¼</p>
    </header>

    <!-- å¡ç‰‡åˆ—è¡¨ -->
    <div class="flex-1 overflow-y-auto p-4 space-y-4 py-6">
      <div v-if="trips.length === 0" class="text-center py-12 text-gray-400">
        <div class="text-4xl mb-4">ğŸŒ</div>
        <p class="text-lg font-medium">é‚„æ²’æœ‰æ—…è¡Œè¨ˆåŠƒå“¦ï½</p>
        <p class="text-sm mt-1">é»æ“Šä¸‹æ–¹æŒ‰éˆ•æ–°å¢ç¬¬ä¸€å€‹è¡Œç¨‹å§ï¼</p>
      </div>
      <div v-else>
        <div 
          v-for="(trip, index) in trips" 
          :key="index"
          class="cute-card rounded-2xl p-6 transform transition-all hover:scale-105 cursor-pointer border border-pink-100"
          @click="editTrip(index)"
        >
          <div class="flex items-start justify-between mb-3">
            <h3 class="font-bold text-xl text-gray-800 flex-1 pr-4 truncate">{{ trip.title }}</h3>
            <span class="text-2xl">{{ getEmojiForTrip(trip) }}</span>
          </div>
          <p class="text-gray-600 mb-4 line-clamp-2">{{ trip.description }}</p>
          <div class="flex flex-wrap gap-1 mb-4">
            <span v-for="(date, i) in trip.dates.slice(0,3)" :key="i" class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full">
              {{ date }}
            </span>
            <span v-if="trip.dates.length > 3" class="px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-full">
              +{{ trip.dates.length - 3 }}æ›´å¤š
            </span>
          </div>
          <div class="flex items-center justify-between text-sm text-gray-500">
            <span>{{ trip.location }}</span>
            <button @click.stop="deleteTrip(index)" class="text-red-400 hover:text-red-500 p-1">
              ğŸ—‘ï¸
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- æ–°å¢æŒ‰éˆ• (å›ºå®šåº•éƒ¨) -->
    <div class="p-6 bg-white border-t border-gray-100 shadow-2xl">
      <button 
        @click="showAddForm = true" 
        class="w-full cute-btn text-white font-bold py-4 px-6 rounded-2xl text-lg shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2"
      >
        â• æ–°å¢æ—…è¡Œè¨ˆåŠƒ
      </button>
    </div>

    <!-- æ–°å¢/ç·¨è¼¯è¡¨å–® (å½ˆå‡º) -->
    <div v-if="showAddForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div class="cute-card rounded-3xl p-8 w-full max-w-md max-h-[90vh] overflow-y-auto">
        <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">
          {{ editingIndex >= 0 ? 'ç·¨è¼¯è¡Œç¨‹' : 'æ–°å¢æ—…è¡Œè¨ˆåŠƒ' }} âœ¨
        </h2>
        <form @submit.prevent="saveTrip" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">è¡Œç¨‹åç¨±</label>
            <input 
              v-model="currentTrip.title" 
              required 
              class="w-full p-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-400 focus:border-transparent outline-none"
              placeholder="ä¾‹å¦‚ï¼šå·´é»æµªæ¼«ä¹‹æ—…"
            >
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ç›®çš„åœ°</label>
            <input 
              v-model="currentTrip.location" 
              required 
              class="w-full p-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-400 focus:border-transparent outline-none"
              placeholder="ä¾‹å¦‚ï¼šå·´é»ã€æ—¥æœ¬"
            >
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">æ—¥æœŸ</label>
            <input 
              v-model="currentTrip.dates" 
              required 
              class="w-full p-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-400 focus:border-transparent outline-none"
              placeholder="ä¾‹å¦‚ï¼š2026/03/01, 2026/03/05, 2026/03/10"
            >
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">æè¿°</label>
            <textarea 
              v-model="currentTrip.description" 
              rows="3"
              class="w-full p-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-400 focus:border-transparent outline-none resize-none"
              placeholder="è¨ˆåŠƒä¸­çš„äº®é»ã€æ³¨æ„äº‹é …..."
            ></textarea>
          </div>
          <div class="flex gap-3 pt-4">
            <button 
              type="submit" 
              class="flex-1 bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-3 px-6 rounded-xl hover:scale-105 transition-all shadow-lg"
            >
              ğŸ’¾ ä¿å­˜
            </button>
            <button 
              @click="cancelEdit" 
              type="button"
              class="flex-1 bg-gray-200 text-gray-700 font-bold py-3 px-6 rounded-xl hover:bg-gray-300 transition-all"
            >
              âŒ å–æ¶ˆ
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    const { createApp, ref, reactive, onMounted } = Vue;

    createApp({
      setup() {
        const trips = ref([]);
        const showAddForm = ref(false);
        const editingIndex = ref(-1);
        const currentTrip = reactive({
          title: '',
          location: '',
          dates: '',
          description: ''
        });

        const getEmojiForTrip = (trip) => {
          const emojis = ['âœˆï¸', 'ğŸŒŸ', 'ğŸ–ï¸', 'ğŸ—ºï¸', 'ğŸ’', 'ğŸŒº', 'ğŸ°', 'ğŸ—½'];
          return emojis[Math.floor(Math.random() * emojis.length)];
        };

        const addTrip = () => {
          const dates = currentTrip.dates.split(',').map(d => d.trim()).filter(Boolean);
          trips.value.push({
            title: currentTrip.title,
            location: currentTrip.location,
            dates: dates,
            description: currentTrip.description
          });
          resetForm();
        };

        const editTrip = (index) => {
          const trip = trips.value[index];
          currentTrip.title = trip.title;
          currentTrip.location = trip.location;
          currentTrip.dates = trip.dates.join(', ');
          currentTrip.description = trip.description;
          editingIndex.value = index;
          showAddForm.value = true;
        };

        const saveTrip = () => {
          if (editingIndex.value >= 0) {
            const dates = currentTrip.dates.split(',').map(d => d.trim()).filter(Boolean);
            trips.value[editingIndex.value] = {
              title: currentTrip.title,
              location: currentTrip.location,
              dates: dates,
              description: currentTrip.description
            };
          } else {
            addTrip();
          }
          resetForm();
        };

        const deleteTrip = (index) => {
          if (confirm('ç¢ºå®šåˆªé™¤é€™å€‹æ—…è¡Œè¨ˆåŠƒå—ï¼Ÿ')) {
            trips.value.splice(index, 1);
          }
        };

        const cancelEdit = () => {
          resetForm();
        };

        const resetForm = () => {
          Object.assign(currentTrip, { title: '', location: '', dates: '', description: '' });
          editingIndex.value = -1;
          showAddForm.value = false;
        };

        // æœ¬åœ°å„²å­˜
        onMounted(() => {
          const saved = localStorage.getItem('travelTrips');
          if (saved) {
            trips.value = JSON.parse(saved);
          }
        });

        const saveToLocal = () => {
          localStorage.setItem('travelTrips', JSON.stringify(trips.value));
        };

        // ç›£è½è®ŠåŒ–è‡ªå‹•å„²å­˜
        watch(trips, saveToLocal, { deep: true });

        return {
          trips,
          showAddForm,
          editingIndex,
          currentTrip,
          getEmojiForTrip,
          editTrip,
          saveTrip,
          deleteTrip,
          cancelEdit
        };
      }
    }).mount('#app');
  </script>

</body>
</html>
